<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9H6DMX2Z62"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-9H6DMX2Z62');
  </script>
  <!-- Contentsquare -->
  <script src="https://t.contentsquare.net/uxa/e0c661a8d9099.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Worth My Money?</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">

    <!-- ============================================================
         SCREEN: HOME
         ============================================================ -->
    <div id="screen-home" class="screen active">
      <!-- Top bar -->
      <div class="top-bar">
        <div class="top-bar-spacer"></div>
        <div class="top-bar-icons">
          <button class="icon-btn lang-btn" id="lang-btn-home">EN</button>
          <button class="icon-btn profile-btn" onclick="navigateTo('profile')">
            <svg class="profile-icon" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="18" stroke="#E08A7E" stroke-width="2.2"/>
              <circle cx="20" cy="15.5" r="5.5" stroke="#E08A7E" stroke-width="2"/>
              <path d="M9.5 33c0-5.8 4.7-10.5 10.5-10.5s10.5 4.7 10.5 10.5" stroke="#E08A7E" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Title -->
      <h1 class="home-title">Is this worth<br>my money?</h1>
      <p class="home-tagline" id="home-tagline"></p>

      <!-- Wallet illustration -->
      <div class="home-illustration">
        <img src="Images/Is this worth my money.png" alt="Wallet illustration">
      </div>

      <!-- Question -->
      <h2 class="home-question">What do you want to calculate?</h2>

      <!-- Buttons -->
      <div class="home-buttons">
        <button class="home-btn btn-regular" onclick="navigateTo('regular')">
          something I buy regularly
        </button>
        <button class="home-btn btn-onetime" onclick="navigateTo('onetime')">
          something I'm thinking of buying
        </button>
        <button class="home-btn btn-expenses" onclick="navigateTo('expenses')">
          my monthly expenses
        </button>
      </div>
      <a class="feedback-link" href="#" onclick="openFeedback(); return false;">üí¨ Feedback</a>
    </div>

    <!-- Onboarding tooltip overlay -->
    <div class="onboarding-overlay" id="onboarding-overlay" style="display:none" onclick="onboardingOverlayClick(event)">
      <div class="onboarding-bubble" id="onboarding-bubble">
        <div class="onboarding-arrow" id="onboarding-arrow"></div>
        <h3 class="onboarding-heading" id="onboarding-heading"></h3>
        <p class="onboarding-text" id="onboarding-text"></p>
        <div class="onboarding-footer">
          <div class="onboarding-nav" id="onboarding-nav"></div>
          <button class="onboarding-skip" id="onboarding-skip" onclick="dismissOnboarding()"></button>
        </div>
      </div>
    </div>

    <!-- ============================================================
         SCREEN: PROFILE
         ============================================================ -->
    <div id="screen-profile" class="screen">
      <!-- Top bar -->
      <div class="top-bar">
        <div class="top-bar-left">
          <button class="back-btn" onclick="navigateBack()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M15 18l-6-6 6-6" stroke="#A09A94" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="home-icon-btn" onclick="navigateTo('home')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M4 12L12 4l8 8" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 10.5V20a1 1 0 001 1h10a1 1 0 001-1V10.5" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.5 21V15a1 1 0 011-1h3a1 1 0 011 1v6" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="15" y="5" width="2.5" height="4" rx="0.5" fill="#fff"/>
            </svg>
          </button>
        </div>
        <div class="top-bar-icons">
          <button class="icon-btn lang-btn" id="lang-btn-profile">VI</button>
          <button class="icon-btn profile-btn active-profile">
            <svg class="profile-icon" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="18" stroke="#E08A7E" stroke-width="2.2"/>
              <circle cx="20" cy="15.5" r="5.5" stroke="#E08A7E" stroke-width="2"/>
              <path d="M9.5 33c0-5.8 4.7-10.5 10.5-10.5s10.5 4.7 10.5 10.5" stroke="#E08A7E" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Header -->
      <div class="profile-header">
        <h1 class="section-title profile-title-text">H·ªì s∆°</h1>
      </div>

      <!-- Profile cards grid wrapper (2-col on desktop) -->
      <div class="profile-grid">

      <!-- Form card -->
      <div class="card profile-card">
        <div class="profile-row">
          <span class="profile-label">T√™n</span>
          <span class="profile-value-wrapper">
            <input type="text" id="profile-name" class="profile-input" placeholder="T√™n c·ªßa b·∫°n">
          </span>
        </div>
        <div class="profile-row">
          <span class="profile-label">Thu nh·∫≠p/th√°ng <span class="required">*</span></span>
          <span class="profile-value-wrapper">
            <input type="text" id="profile-income" class="profile-input income-input" placeholder="0" inputmode="numeric">
          </span>
        </div>
        <div class="profile-row">
          <span class="profile-label">Ti·ªÅn t·ªá</span>
          <span class="profile-value-wrapper">
            <div class="currency-search-wrapper">
              <input type="text" id="currency-search" class="profile-input currency-search-input" placeholder="T√¨m lo·∫°i ti·ªÅn..." autocomplete="off">
              <div class="currency-dropdown" id="currency-dropdown"></div>
            </div>
            <input type="hidden" id="profile-currency">
          </span>
        </div>
        <div class="profile-row">
          <span class="profile-label">B·∫°n l√†m <span class="required">*</span></span>
          <span class="profile-value-wrapper">
            <input type="text" id="profile-hours" class="profile-input hours-input" placeholder="40" inputmode="numeric">
            <span class="profile-suffix">gi·ªù/tu·∫ßn</span>
          </span>
        </div>
        <div class="card-submit">
          <button class="submit-arrow-icon" onclick="saveProfile()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M9 6l6 6-6 6" stroke="#E85D3A" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>


      <!-- L∆∞∆°ng/gi·ªù card -->
      <div class="card hourly-rate-card" id="hourly-rate-card">
        <div class="hourly-rate-inner">
          <p class="hourly-rate-label">L∆∞∆°ng theo gi·ªù c·ªßa b·∫°n</p>
          <p class="hourly-rate-value" id="hourly-rate-value"></p>
          <p class="hourly-rate-note">T√≠nh theo th√°ng trung b√¨nh (‚âà 4.33 tu·∫ßn)</p>
        </div>
      </div>

       <!-- Workday settings (hidden until user first sets them on regular page) -->
      <div class="card profile-card profile-workday-card" id="profile-workday-section" style="display:none;">
        <div class="profile-row">
          <span class="profile-label">Gi·ªù b·∫Øt ƒë·∫ßu l√†m</span>
          <span class="profile-value-wrapper">
            <input type="time" id="profile-start-time" class="profile-input workday-time-input" value="08:30">
          </span>
        </div>
        <div class="profile-row">
          <span class="profile-label">B·∫°n l√†m</span>
          <span class="profile-value-wrapper">
            <input type="text" id="profile-days-per-week" class="profile-input hours-input" placeholder="5.5" inputmode="decimal">
            <span class="profile-suffix">ng√†y/tu·∫ßn</span>
          </span>
        </div>
        <div class="card-submit">
          <button class="submit-arrow-icon" onclick="saveProfileWorkday()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M9 6l6 6-6 6" stroke="#E85D3A" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      </div><!-- /profile-grid -->

      <!-- Your expenses summary (only shown if expense data exists) -->
      <div class="card profile-card profile-expenses-card" id="profile-expenses-section" style="display:none;">
        <div class="profile-expenses-header">
          <h3 class="exp-sub-title">Chi ti√™u c·ªßa b·∫°n</h3>
          <button class="exp-edit-btn" onclick="navigateTo('expenses')">S·ª≠a</button>
        </div>
        <div id="profile-expenses-summary"></div>
        <div class="profile-expenses-total" id="profile-expenses-total"></div>
      </div>

      <!-- Navigation -->
      <h2 class="home-question">B·∫°n mu·ªën t√≠nh g√¨?</h2>
      <div class="home-buttons">
        <button class="home-btn btn-regular" onclick="navigateTo('regular')">
          th·ª© m√¨nh hay mua
        </button>
        <button class="home-btn btn-onetime" onclick="navigateTo('onetime')">
          th·ª© m√¨nh ƒëang mu·ªën mua
        </button>
        <button class="home-btn btn-expenses" onclick="navigateTo('expenses')">
          chi ti√™u h√†ng th√°ng
        </button>
      </div>
      <a class="feedback-link" href="#" onclick="openFeedback(); return false;">üí¨ G√≥p √Ω</a>
    </div>

    <!-- ============================================================
         SCREEN: SOMETHING I BUY REGULARLY
         ============================================================ -->
    <div id="screen-regular" class="screen">
      <!-- Top bar -->
      <div class="top-bar">
        <div class="top-bar-left">
          <button class="back-btn" onclick="navigateBack()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M15 18l-6-6 6-6" stroke="#A09A94" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="home-icon-btn" onclick="navigateTo('home')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M4 12L12 4l8 8" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 10.5V20a1 1 0 001 1h10a1 1 0 001-1V10.5" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.5 21V15a1 1 0 011-1h3a1 1 0 011 1v6" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="15" y="5" width="2.5" height="4" rx="0.5" fill="#fff"/>
            </svg>
          </button>
        </div>
        <div class="top-bar-icons">
          <button class="icon-btn lang-btn" id="lang-btn-regular">VI</button>
          <button class="icon-btn profile-btn" onclick="navigateTo('profile')">
            <svg class="profile-icon" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="18" stroke="#E08A7E" stroke-width="2.2"/>
              <circle cx="20" cy="15.5" r="5.5" stroke="#E08A7E" stroke-width="2"/>
              <path d="M9.5 33c0-5.8 4.7-10.5 10.5-10.5s10.5 4.7 10.5 10.5" stroke="#E08A7E" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Title -->
      <h1 class="section-title regular-title">Th·ª© m√¨nh hay mua</h1>

      <!-- Input card -->
      <div class="card input-card">
        <div class="card-inner">
          <div class="input-row">
            <span class="input-label">M√¨nh hay mua</span>
            <input type="text" id="regular-item" class="text-input" placeholder="c√† ph√™">
          </div>
          <div class="input-row">
            <input type="text" id="regular-times" class="number-input" placeholder="3" inputmode="numeric">
            <span class="input-label">l·∫ßn <span class="required">*</span></span>
          </div>
          <div class="input-row">
            <span class="input-label">m·ªói</span>
            <select id="regular-frequency" class="frequency-select">
              <option value="day">ng√†y</option>
              <option value="week" selected>tu·∫ßn</option>
              <option value="month">th√°ng</option>
            </select>
          </div>
          <div class="input-row">
            <span class="input-label">m·ªói l·∫ßn <span class="required">*</span></span>
            <span class="exp-currency-input-group">
              <span class="currency-badge" id="regular-currency-badge">VND</span>
              <input type="text" id="regular-cost" class="number-input cost-input" placeholder="0" inputmode="numeric">
            </span>
          </div>
          <div class="card-submit">
            <button class="submit-arrow" onclick="calculateRegular()">
Go
            </button>
          </div>
          <p class="income-summary-note">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
        </div>
      </div>

      <!-- Monthly total -->
      <div class="monthly-total" id="regular-monthly-total" style="display:none;">
        <div class="total-bars">
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
        <span class="total-amount" id="regular-total-amount"></span>
        <span class="total-period">/th√°ng</span>
      </div>

      <!-- Result card: Normal (purple) -->
      <div class="result-card result-purple" id="regular-result-normal" style="display:none;">
        <div class="result-content">
          <p class="result-text" id="regular-result-text"></p>
          <div class="pie-chart-container">
            <div class="pie-legend" id="regular-pie-legend">
              <div class="pie-legend-item">
                <span class="pie-legend-square pie-legend-expense"></span>
                <span class="pie-legend-text" id="regular-pie-label"></span>
              </div>
              <div class="pie-legend-item">
                <span class="pie-legend-square pie-legend-income"></span>
                <span class="pie-legend-text">thu nh·∫≠p</span>
              </div>
            </div>
            <canvas class="pie-chart" id="regular-pie-chart" width="280" height="280"></canvas>
          </div>
        </div>
        <div class="result-footer">
          <button class="share-btn" onclick="shareRegularResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Workday card (only for normal result, ‚â§100%) -->
      <div class="result-card result-purple" id="regular-workday-card" style="display:none;">
        <div class="result-content">
          <h3 class="workday-title">Xem th·ª≠ trong ng√†y l√†m vi·ªác</h3>
          <div class="workday-input-row">
            <span class="input-label">M√¨nh l√†m t·ª´</span>
            <input type="time" id="workday-start-time" class="workday-time-input" value="08:30">
          </div>
          <div class="workday-input-row">
            <span class="input-label">M√¨nh l√†m</span>
            <input type="text" id="workday-days-per-week" class="number-input workday-days-input" placeholder="5.5" inputmode="decimal">
            <span class="input-label">ng√†y/tu·∫ßn</span>
          </div>
          <div class="card-submit">
            <button class="submit-arrow" onclick="calculateWorkday()">
Go
            </button>
          </div>
        </div>
        <div class="workday-result" id="workday-result" style="display:none;">
          <p class="workday-result-text" id="workday-result-text"></p>
        </div>
        <div class="result-footer">
          <button class="share-btn" onclick="shareWorkdayResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Result card: Warning (red) -->
      <div class="result-card result-red" id="regular-result-warning" style="display:none;">
        <div class="result-content">
          <h3 class="warning-title">·ªêi, c√≥ v·∫•n ƒë·ªÅ r·ªìi</h3>
          <p class="warning-text" id="regular-warning-text"></p>
          <p class="warning-advice">
            <strong>N·∫øu kh√¥ng mu·ªën ch√¨m trong n·ª£,<br>h√£y c√¢n nh·∫Øc c·∫Øt gi·∫£m ho·∫∑c t√¨m l·ª±a ch·ªçn r·∫ª h∆°n nh√©.</strong>
          </p>
        </div>
        <div class="result-footer">
          <button class="share-btn" onclick="shareRegularResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- No income state -->
      <div class="no-income-card no-income-purple" id="regular-no-income" style="display:none;">
        <div class="no-income-content">
          <img src="Images/Calculator 2.png" alt="Calculator" class="no-income-img">
          <a href="#" class="no-income-link" onclick="navigateTo('profile'); return false;">C·∫≠p nh·∫≠t thu nh·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu t√≠nh nh√©!</a>
        </div>
        <div class="result-footer">
          <button class="share-btn" onclick="shareRegularResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Income summary -->
      <div class="income-summary" id="regular-income-summary" style="display:none;">
        <div class="income-summary-row">
          <span class="income-summary-label">Thu nh·∫≠p/th√°ng</span>
          <span class="income-summary-value" id="regular-summary-income"></span>
        </div>
        <div class="income-summary-row">
          <span class="income-summary-label">L∆∞∆°ng/gi·ªù</span>
          <span class="income-summary-value" id="regular-summary-rate"></span>
        </div>
        <a href="#" class="income-summary-link" onclick="navigateTo('profile'); return false;">C·∫≠p nh·∫≠t thu nh·∫≠p h√†ng th√°ng</a>
      </div>

      <!-- Bottom navigation -->
      <div class="bottom-nav" id="regular-bottom-nav" style="display:none;">
        <div class="bottom-nav-buttons">
          <button class="nav-btn nav-btn-regular" onclick="resetAndStay('regular')">t√≠nh m√≥n kh√°c</button>
          <button class="nav-btn nav-btn-onetime" onclick="navigateTo('onetime')">m√¨nh ƒëang mu·ªën mua...</button>
          <button class="nav-btn nav-btn-expenses" onclick="navigateTo('expenses')">ti·ªÅn ƒëi ƒë√¢u h·∫øt?</button>
        </div>
      </div>
      <a class="feedback-link" href="#" onclick="openFeedback(); return false;">üí¨ G√≥p √Ω</a>
    </div>

    <!-- ============================================================
         SCREEN: SOMETHING I'M THINKING OF BUYING
         ============================================================ -->
    <div id="screen-onetime" class="screen">
      <!-- Top bar -->
      <div class="top-bar">
        <div class="top-bar-left">
          <button class="back-btn" onclick="navigateBack()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M15 18l-6-6 6-6" stroke="#A09A94" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="home-icon-btn" onclick="navigateTo('home')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M4 12L12 4l8 8" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 10.5V20a1 1 0 001 1h10a1 1 0 001-1V10.5" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.5 21V15a1 1 0 011-1h3a1 1 0 011 1v6" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="15" y="5" width="2.5" height="4" rx="0.5" fill="#fff"/>
            </svg>
          </button>
        </div>
        <div class="top-bar-icons">
          <button class="icon-btn lang-btn" id="lang-btn-onetime">VI</button>
          <button class="icon-btn profile-btn" onclick="navigateTo('profile')">
            <svg class="profile-icon" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="18" stroke="#E08A7E" stroke-width="2.2"/>
              <circle cx="20" cy="15.5" r="5.5" stroke="#E08A7E" stroke-width="2"/>
              <path d="M9.5 33c0-5.8 4.7-10.5 10.5-10.5s10.5 4.7 10.5 10.5" stroke="#E08A7E" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Title -->
      <h1 class="section-title onetime-title">Th·ª© m√¨nh ƒëang<br>mu·ªën mua</h1>

      <!-- Input card -->
      <div class="card input-card">
        <div class="card-inner">
          <div class="input-row">
            <span class="input-label">M√¨nh ƒëang mu·ªën mua</span>
            <input type="text" id="onetime-item" class="text-input" placeholder="qu·∫ßn √°o">
          </div>
          <div class="input-row">
            <span class="input-label">gi√° <span class="required">*</span></span>
            <span class="exp-currency-input-group">
              <span class="currency-badge" id="onetime-currency-badge">VND</span>
              <input type="text" id="onetime-cost" class="number-input cost-input" placeholder="0" inputmode="numeric">
            </span>
          </div>
          <div class="card-submit">
            <button class="submit-arrow" onclick="calculateOnetime()">
Go
            </button>
          </div>
          <p class="income-summary-note">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
        </div>
      </div>

      <!-- Result card: Normal (green) -->
      <div class="result-card result-green" id="onetime-result-normal" style="display:none;">
        <div class="result-content">
          <p class="result-text" id="onetime-result-text"></p>
          <div class="pie-chart-container">
            <div class="pie-legend" id="onetime-pie-legend">
              <div class="pie-legend-item">
                <span class="pie-legend-square pie-legend-expense"></span>
                <span class="pie-legend-text" id="onetime-pie-label"></span>
              </div>
              <div class="pie-legend-item">
                <span class="pie-legend-square pie-legend-income"></span>
                <span class="pie-legend-text">thu nh·∫≠p</span>
              </div>
            </div>
            <canvas class="pie-chart" id="onetime-pie-chart" width="280" height="280"></canvas>
          </div>
        </div>
        <div class="result-footer">
          <a href="#" class="saving-goal-link" onclick="toggleSavingGoal(); return false;">T√≠nh m·ª•c ti√™u ti·∫øt ki·ªám</a>
          <button class="share-btn" onclick="shareOnetimeResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Result card: Warning (red) -->
      <div class="result-card result-red" id="onetime-result-warning" style="display:none;">
        <div class="result-content">
          <h3 class="warning-title">Hmm... d·ª´ng l·∫°i suy nghƒ© ch√∫t ƒë√£</h3>
          <p class="warning-text" id="onetime-warning-text"></p>
          <div class="saving-tiers" id="onetime-warning-advice"></div>
          <p class="warning-bottom"><strong>M√≥n l·ªõn th√¨ ph·∫£i c√¢n nh·∫Øc k·ªπ nh√© ü§î</strong></p>
        </div>
        <div class="result-footer">
          <a href="#" class="saving-goal-link" onclick="toggleSavingGoal(); return false;">T√≠nh m·ª•c ti√™u ti·∫øt ki·ªám</a>
          <button class="share-btn" onclick="shareOnetimeResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Saving goal calculator card (one-time only) -->
      <div class="result-card result-green" id="onetime-saving-goal" style="display:none;">
        <div class="result-content">
          <h3 class="saving-goal-title">L√™n k·∫ø ho·∫°ch ti·∫øt ki·ªám</h3>
          <div class="saving-goal-input-row">
            <span class="input-label">M√¨nh ti·∫øt ki·ªám ƒë∆∞·ª£c</span>
            <span class="exp-currency-input-group">
              <span class="currency-badge" id="saving-currency-badge">VND</span>
              <input type="text" id="saving-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
            </span>
            <span class="input-label">/ th√°ng</span>
          </div>
          <div class="card-submit">
            <button class="submit-arrow" onclick="calculateSavingGoal()">
Go
            </button>
          </div>
        </div>
        <div class="saving-goal-result" id="saving-goal-result" style="display:none;">
          <p class="saving-goal-result-text" id="saving-goal-result-text"></p>
        </div>
        <div class="result-footer">
          <button class="share-btn" onclick="shareSavingGoal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- No income state -->
      <div class="no-income-card no-income-green" id="onetime-no-income" style="display:none;">
        <div class="no-income-content">
          <img src="Images/Calculator.png" alt="Calculator" class="no-income-img">
          <a href="#" class="no-income-link" onclick="navigateTo('profile'); return false;">C·∫≠p nh·∫≠t thu nh·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu t√≠nh nh√©!</a>
        </div>
        <div class="result-footer">
          <button class="share-btn" onclick="shareOnetimeResult()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Income summary -->
      <div class="income-summary" id="onetime-income-summary" style="display:none;">
        <div class="income-summary-row">
          <span class="income-summary-label">Thu nh·∫≠p/th√°ng</span>
          <span class="income-summary-value" id="onetime-summary-income"></span>
        </div>
        <div class="income-summary-row">
          <span class="income-summary-label">L∆∞∆°ng/gi·ªù</span>
          <span class="income-summary-value" id="onetime-summary-rate"></span>
        </div>
        <a href="#" class="income-summary-link" onclick="navigateTo('profile'); return false;">C·∫≠p nh·∫≠t thu nh·∫≠p h√†ng th√°ng</a>
      </div>

      <!-- Bottom navigation -->
      <div class="bottom-nav" id="onetime-bottom-nav" style="display:none;">
        <div class="bottom-nav-buttons">
          <button class="nav-btn nav-btn-onetime" onclick="resetAndStay('onetime')">m√¨nh ƒëang mu·ªën mua...</button>
          <button class="nav-btn nav-btn-regular" onclick="navigateTo('regular')">xem chi ti√™u th∆∞·ªùng xuy√™n</button>
          <button class="nav-btn nav-btn-expenses" onclick="navigateTo('expenses')">ti·ªÅn ƒëi ƒë√¢u h·∫øt?</button>
        </div>
      </div>
      <a class="feedback-link" href="#" onclick="openFeedback(); return false;">üí¨ G√≥p √Ω</a>
    </div>

    <!-- ============================================================
         SCREEN: MY DAILY EXPENSES
         ============================================================ -->
    <div id="screen-expenses" class="screen">
      <!-- Top bar -->
      <div class="top-bar">
        <div class="top-bar-left">
          <button class="back-btn" onclick="expensesBack()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M15 18l-6-6 6-6" stroke="#A09A94" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="home-icon-btn" onclick="navigateTo('home')">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M4 12L12 4l8 8" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 10.5V20a1 1 0 001 1h10a1 1 0 001-1V10.5" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.5 21V15a1 1 0 011-1h3a1 1 0 011 1v6" stroke="#fff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="15" y="5" width="2.5" height="4" rx="0.5" fill="#fff"/>
            </svg>
          </button>
        </div>
        <div class="top-bar-icons">
          <button class="icon-btn lang-btn" id="lang-btn-expenses">VI</button>
          <button class="icon-btn profile-btn" onclick="navigateTo('profile')">
            <svg class="profile-icon" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="18" stroke="#E08A7E" stroke-width="2.2"/>
              <circle cx="20" cy="15.5" r="5.5" stroke="#E08A7E" stroke-width="2"/>
              <path d="M9.5 33c0-5.8 4.7-10.5 10.5-10.5s10.5 4.7 10.5 10.5" stroke="#E08A7E" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Title -->
      <h1 class="section-title expenses-title">Chi ti√™u h√†ng th√°ng</h1>

      <!-- Subtitle (shown during wizard) -->
      <p class="exp-subtitle" id="expenses-subtitle" style="display:none;">Tr∆∞·ªõc ti√™n, xem th·ª≠ ti·ªÅn ƒëi ƒë√¢u h·∫øt nh√©.</p>

      <!-- No income state -->
      <div class="no-income-card no-income-yellow" id="expenses-no-income" style="display:none;">
        <div class="no-income-content">
          <div class="exp-no-income-illustration">
            <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
              <ellipse cx="60" cy="62" rx="40" ry="36" fill="#D8C4F0" opacity="0.5"/>
              <rect x="30" y="42" width="60" height="40" rx="8" fill="#E8854A"/>
              <rect x="34" y="46" width="52" height="32" rx="5" fill="#F09060" stroke="#E8854A" stroke-width="1" stroke-dasharray="4 3"/>
              <path d="M44 62c0-1 1-3 3-3s3 2 3 3M54 62c0-1 1-3 3-3s3 2 3 3" stroke="#5C3D2E" stroke-width="2" stroke-linecap="round"/>
              <path d="M68 62c0-1 .5-2 1.5-2" stroke="#5C3D2E" stroke-width="2" stroke-linecap="round"/>
              <circle cx="78" cy="56" r="6" fill="#8B5E3C"/>
              <rect x="40" y="30" width="20" height="16" rx="3" fill="#B8E8CC"/>
              <rect x="50" y="28" width="18" height="16" rx="3" fill="#02b887" opacity="0.7"/>
              <circle cx="59" cy="36" r="3" fill="#2D7A4F" opacity="0.5"/>
            </svg>
          </div>
          <p class="exp-no-income-text"><strong>H√¨nh nh∆∞ b·∫°n ch∆∞a c·∫≠p nh·∫≠t thu nh·∫≠p.</strong><br>M√¨nh xem b·∫°n ki·∫øm ƒë∆∞·ª£c bao nhi√™u m·ªói th√°ng tr∆∞·ªõc nh√©!</p>
          <a href="#" class="exp-no-income-link" onclick="navigateTo('profile'); return false;">C·∫≠p nh·∫≠t thu nh·∫≠p</a>
        </div>
      </div>

      <!-- ====== STEP 1: HOUSING (1/4) ====== -->
      <div id="expenses-step-housing" style="display:none;">
        <!-- Pie chart area (top right) -->
        <div class="exp-pie-area" id="housing-pie-area" style="display:none;">
          <div class="exp-pie-legend" id="housing-pie-legend"></div>
          <canvas class="exp-step-pie" id="housing-step-pie" width="160" height="160"></canvas>
        </div>

        <div class="exp-step-header">
          <div class="exp-step-icon-wrap">
            <svg class="exp-step-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
              <path d="M4 16L16 5l12 11v13a1 1 0 01-1 1H5a1 1 0 01-1-1V16z" fill="#5C3D2E"/>
              <rect x="13" y="20" width="6" height="9" rx="1" fill="#E8C07A"/>
            </svg>
            <div class="exp-step-underline"></div>
          </div>
          <span class="exp-step-progress">1/4</span>
        </div>
        <h2 class="exp-step-title">Nh√† ·ªü</h2>
        <p class="exp-step-question" id="housing-question">B·∫Øt ƒë·∫ßu v·ªõi m√°i nh√† tr√™n ƒë·∫ßu nha.<br><strong>B·∫°n c√≥ tr·∫£ ti·ªÅn nh√† kh√¥ng?</strong></p>

        <!-- Choice cards -->
        <div class="exp-choice-row" id="housing-choice-row">
          <button class="exp-choice-card" id="housing-choice-no" onclick="housingChoice(false)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="16" y="18" width="24" height="28" rx="4" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <rect x="20" y="12" width="16" height="10" rx="2" fill="#B8E8CC"/>
                <circle cx="28" cy="32" r="5" fill="#02b887"/>
                <circle cx="22" cy="22" r="2" fill="#F0C020"/>
                <circle cx="28" cy="20" r="1.5" fill="#F0C020"/>
                <circle cx="34" cy="22" r="2" fill="#F0C020"/>
              </svg>
            </div>
            <span class="exp-choice-label">Kh√¥ng,<br>m√¨nh ·ªïn</span>
          </button>
          <button class="exp-choice-card" id="housing-choice-yes" onclick="housingChoice(true)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="12" y="22" width="32" height="18" rx="3" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <circle cx="28" cy="31" r="5" fill="#02b887"/>
                <path d="M20 16l3 6M36 16l-3 6M28 12v8" stroke="#02b887" stroke-width="2" stroke-linecap="round"/>
                <path d="M18 18l2-4M38 18l-2-4" stroke="#E8A838" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
            <span class="exp-choice-label">C√≥, m√¨nh<br>tr·∫£ ti·ªÅn</span>
          </button>
        </div>

        <!-- Housing "No" response -->
        <div id="housing-no-msg" class="exp-message-card" style="display:none;">
          <p class="exp-message-text">Tuy·ªát! Kh√¥ng t·ªën ti·ªÅn nh√† ·ªü.<br><span class="exp-message-highlight">ƒê√≥ l√† m·ªôt kho·∫£n ti·∫øt ki·ªám l·ªõn!</span></p>
        </div>

        <!-- Housing amount input (if "Yes") -->
        <div id="housing-amount-section" style="display:none;">
          <div class="exp-inline-input">
            <span class="input-label">M√¨nh chi</span>
            <span class="exp-currency-input-group">
              <span class="currency-badge" id="expenses-housing-currency">VND</span>
              <input type="text" id="housing-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
            </span>
            <span class="input-label">/th√°ng cho nh√† ·ªü.</span>
          </div>
          <p class="income-summary-note" style="margin-top:8px;">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
        </div>

        <!-- Housing result -->
        <div id="housing-result" style="display:none;">
          <p class="exp-result-text" id="housing-result-text"></p>
        </div>

        <!-- Bottom nav -->
        <div class="exp-bottom-nav" id="housing-bottom-nav">
          <div class="exp-nav-arrows">
            <button class="exp-nav-arrow exp-nav-disabled" disabled>Back</button>
            <p class="income-summary-note exp-nav-currency-note">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
            <button class="exp-nav-arrow exp-nav-disabled" id="housing-nav-forward" disabled onclick="goToUtilitiesStep()">
Go
            </button>
          </div>
        </div>
      </div>

      <!-- ====== STEP 2: UTILITIES (2/4) ====== -->
      <div id="expenses-step-utilities" style="display:none;">
        <!-- Pie chart area -->
        <div class="exp-pie-area" id="utilities-pie-area" style="display:none;">
          <div class="exp-pie-legend" id="utilities-pie-legend"></div>
          <canvas class="exp-step-pie" id="utilities-step-pie" width="160" height="160"></canvas>
        </div>

        <div class="exp-step-header">
          <div class="exp-step-icon-wrap">
            <svg class="exp-step-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
              <path d="M16 4C12 4 10 8 10 12c0 3 2 5 4 6v2h4v-2c2-1 4-3 4-6 0-4-2-8-6-8z" fill="#F0C020"/>
              <rect x="12" y="22" width="8" height="3" rx="1.5" fill="#E8A838"/>
              <rect x="13" y="26" width="6" height="2" rx="1" fill="#E8A838"/>
              <line x1="16" y1="8" x2="16" y2="14" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
              <line x1="13" y1="11" x2="19" y2="11" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            <div class="exp-step-underline"></div>
          </div>
          <span class="exp-step-progress">2/4</span>
        </div>
        <h2 class="exp-step-title">Ti·ªán √≠ch</h2>
        <p class="exp-step-question" id="utilities-question">C√≤n c√°c h√≥a ƒë∆°n h√†ng th√°ng th√¨ sao?<br><strong>B·∫°n c√≥ t·ª± tr·∫£ kh√¥ng?</strong></p>

        <!-- Choice cards -->
        <div class="exp-choice-row" id="utilities-choice-row">
          <button class="exp-choice-card" id="utilities-choice-no" onclick="utilitiesChoice(false)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="16" y="18" width="24" height="28" rx="4" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <rect x="20" y="12" width="16" height="10" rx="2" fill="#B8E8CC"/>
                <circle cx="28" cy="32" r="5" fill="#02b887"/>
                <circle cx="22" cy="22" r="2" fill="#F0C020"/>
                <circle cx="28" cy="20" r="1.5" fill="#F0C020"/>
                <circle cx="34" cy="22" r="2" fill="#F0C020"/>
              </svg>
            </div>
            <span class="exp-choice-label">Kh√¥ng,<br>m√¨nh ·ªïn</span>
          </button>
          <button class="exp-choice-card" id="utilities-choice-yes" onclick="utilitiesChoice(true)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="12" y="22" width="32" height="18" rx="3" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <circle cx="28" cy="31" r="5" fill="#02b887"/>
                <path d="M20 16l3 6M36 16l-3 6M28 12v8" stroke="#02b887" stroke-width="2" stroke-linecap="round"/>
                <path d="M18 18l2-4M38 18l-2-4" stroke="#E8A838" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
            <span class="exp-choice-label">C√≥, m√¨nh<br>t·ª± tr·∫£</span>
          </button>
        </div>

        <!-- Utilities "No" response -->
        <div id="utilities-no-msg" class="exp-message-card" style="display:none;">
          <p class="exp-message-text">Tuy·ªát! B·ªõt m·ªôt th·ª© ph·∫£i lo.<br><span class="exp-message-highlight">Ti·∫øt ki·ªám ƒë∆∞·ª£c kha kh√°!</span></p>
        </div>

        <!-- Utilities input section (if "Yes") -->
        <div id="utilities-input-section" style="display:none;">
          <div class="exp-utility-options">
            <!-- Option 1: Total amount -->
            <div class="exp-utility-total" id="utilities-total-section">
              <span class="input-label">T·ªïng/th√°ng:</span>
              <span class="exp-currency-input-group">
                <span class="currency-badge" id="expenses-utilities-currency">VND</span>
                <input type="text" id="utilities-total" class="number-input cost-input" placeholder="0" inputmode="numeric">
              </span>
            </div>

            <div class="exp-or-separator" id="utilities-or-1"><span>HO·∫∂C</span></div>

            <!-- Option 2: Breakdown -->
            <button class="exp-breakdown-toggle" id="utilities-breakdown-btn" onclick="toggleUtilitiesBreakdown()">
              Chi ti·∫øt h∆°n. B·∫•m ƒë·ªÉ m·ªü
            </button>
            <div id="utilities-breakdown-section" style="display:none;">
              <div class="exp-breakdown-grid">
                <div class="exp-breakdown-row">
                  <span class="exp-breakdown-label">ƒêi·ªán</span>
                  <span class="exp-currency-input-group">
                    <span class="currency-badge" id="exp-util-elec-currency">VND</span>
                    <input type="text" id="utilities-electricity" class="number-input cost-input" placeholder="0" inputmode="numeric">
                  </span>
                </div>
                <div class="exp-breakdown-row">
                  <span class="exp-breakdown-label">N∆∞·ªõc</span>
                  <span class="exp-currency-input-group">
                    <span class="currency-badge" id="exp-util-water-currency">VND</span>
                    <input type="text" id="utilities-water" class="number-input cost-input" placeholder="0" inputmode="numeric">
                  </span>
                </div>
                <div class="exp-breakdown-row">
                  <span class="exp-breakdown-label">Internet</span>
                  <span class="exp-currency-input-group">
                    <span class="currency-badge" id="exp-util-internet-currency">VND</span>
                    <input type="text" id="utilities-internet" class="number-input cost-input" placeholder="0" inputmode="numeric">
                  </span>
                </div>
                <div class="exp-breakdown-row">
                  <span class="exp-breakdown-label">Kh√°c</span>
                  <span class="exp-currency-input-group">
                    <span class="currency-badge" id="exp-util-others-currency">VND</span>
                    <input type="text" id="utilities-others" class="number-input cost-input" placeholder="0" inputmode="numeric">
                  </span>
                </div>
              </div>
            </div>
          </div>
          <p class="income-summary-note" style="margin-top:8px;">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
        </div>

        <!-- Bottom nav -->
        <div class="exp-bottom-nav">
          <div class="exp-nav-arrows">
            <button class="exp-nav-arrow" onclick="goToHousingStep()">
Back
            </button>
            <p class="income-summary-note exp-nav-currency-note">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
            <button class="exp-nav-arrow exp-nav-disabled" id="utilities-nav-forward" disabled onclick="goToFoodStep()">
Go
            </button>
          </div>
        </div>
      </div>

      <!-- ====== STEP 3: FOOD & DRINK (3/4) ====== -->
      <div id="expenses-step-food" style="display:none;">
        <!-- Pie chart area -->
        <div class="exp-pie-area" id="food-pie-area" style="display:none;">
          <div class="exp-pie-legend" id="food-pie-legend"></div>
          <canvas class="exp-step-pie" id="food-step-pie" width="160" height="160"></canvas>
        </div>

        <div class="exp-step-header">
          <div class="exp-step-icon-wrap">
            <svg class="exp-step-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
              <ellipse cx="16" cy="24" rx="12" ry="4" fill="#D4940A" opacity="0.3"/>
              <path d="M4 24c0-8 6-16 12-16s12 8 12 16" fill="#2D2A26" opacity="0.8"/>
              <line x1="16" y1="4" x2="16" y2="8" stroke="#2D2A26" stroke-width="2" stroke-linecap="round"/>
              <circle cx="16" cy="3" r="1.5" fill="#2D2A26"/>
              <rect x="4" y="23" width="24" height="3" rx="1.5" fill="#E8C07A"/>
            </svg>
            <div class="exp-step-underline"></div>
          </div>
          <span class="exp-step-progress">3/4</span>
        </div>
        <h2 class="exp-step-title">ƒÇn u·ªëng</h2>
        <p class="exp-step-question" id="food-question"><strong>C√°i g√¨ ƒëang "ƒÉn" v√≠ b·∫°n?</strong></p>

        <!-- Choice cards -->
        <div class="exp-choice-row" id="food-choice-row">
          <button class="exp-choice-card" id="food-choice-no" onclick="foodChoice(false)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="16" y="18" width="24" height="28" rx="4" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <rect x="20" y="12" width="16" height="10" rx="2" fill="#B8E8CC"/>
                <circle cx="28" cy="32" r="5" fill="#02b887"/>
                <circle cx="22" cy="22" r="2" fill="#F0C020"/>
                <circle cx="28" cy="20" r="1.5" fill="#F0C020"/>
                <circle cx="34" cy="22" r="2" fill="#F0C020"/>
              </svg>
            </div>
            <span class="exp-choice-label">Kh√¥ng,<br>m√¨nh ·ªïn</span>
          </button>
          <button class="exp-choice-card" id="food-choice-yes" onclick="foodChoice(true)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="12" y="22" width="32" height="18" rx="3" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <circle cx="28" cy="31" r="5" fill="#02b887"/>
                <path d="M20 16l3 6M36 16l-3 6M28 12v8" stroke="#02b887" stroke-width="2" stroke-linecap="round"/>
                <path d="M18 18l2-4M38 18l-2-4" stroke="#E8A838" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
            <span class="exp-choice-label">C√≥, m√¨nh<br>t·ª± tr·∫£</span>
          </button>
        </div>

        <!-- Food "No" message -->
        <div id="food-no-msg" class="exp-message-card" style="display:none;">
          <p class="exp-message-text">B·ª•ng no r·ªìi m√† v√≠ v·∫´n ƒë·∫ßy. S∆∞·ªõng nh√©!</p>
        </div>

        <!-- Food breakdown (if "Yes") -->
        <div id="food-breakdown-section" style="display:none;">
          <div class="exp-subcategory-list">
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">ƒêi ch·ª£</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-food-groc-currency">VND</span>
                  <input type="text" id="food-groceries-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói l·∫ßn</span>
                <span class="exp-times-x">&times;</span>
                <input type="text" id="food-groceries-times" class="number-input exp-times-input" placeholder="0" inputmode="numeric">
                <span class="exp-times-label">l·∫ßn/th√°ng</span>
              </div>
            </div>
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">ƒÇn ngo√†i</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-food-eat-currency">VND</span>
                  <input type="text" id="food-eating-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói l·∫ßn</span>
                <span class="exp-times-x">&times;</span>
                <input type="text" id="food-eating-times" class="number-input exp-times-input" placeholder="0" inputmode="numeric">
                <span class="exp-times-label">l·∫ßn/th√°ng</span>
              </div>
            </div>
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">C√† ph√™</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-food-coffee-currency">VND</span>
                  <input type="text" id="food-coffee-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói l·∫ßn</span>
                <span class="exp-times-x">&times;</span>
                <input type="text" id="food-coffee-times" class="number-input exp-times-input" placeholder="0" inputmode="numeric">
                <span class="exp-times-label">l·∫ßn/th√°ng</span>
              </div>
            </div>
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">Kh√°c</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-food-other-currency">VND</span>
                  <input type="text" id="food-others-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói l·∫ßn</span>
                <span class="exp-times-x">&times;</span>
                <input type="text" id="food-others-times" class="number-input exp-times-input" placeholder="0" inputmode="numeric">
                <span class="exp-times-label">l·∫ßn/th√°ng</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom nav -->
        <div class="exp-bottom-nav">
          <div class="exp-nav-arrows">
            <button class="exp-nav-arrow" onclick="goToUtilitiesStep()">
Back
            </button>
            <p class="income-summary-note exp-nav-currency-note">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
            <button class="exp-nav-arrow exp-nav-disabled" id="food-nav-forward" disabled onclick="goToTransportStep()">
Go
            </button>
          </div>
        </div>
      </div>

      <!-- ====== STEP 4: TRANSPORT (4/4) ====== -->
      <div id="expenses-step-transport" style="display:none;">
        <!-- Pie chart area -->
        <div class="exp-pie-area" id="transport-pie-area" style="display:none;">
          <div class="exp-pie-legend" id="transport-pie-legend"></div>
          <canvas class="exp-step-pie" id="transport-step-pie" width="160" height="160"></canvas>
        </div>

        <div class="exp-step-header">
          <div class="exp-step-icon-wrap">
            <svg class="exp-step-icon" width="32" height="32" viewBox="0 0 32 32" fill="none">
              <rect x="4" y="12" width="24" height="12" rx="3" fill="#2D2A26" opacity="0.8"/>
              <rect x="7" y="8" width="18" height="8" rx="2" fill="#2D2A26" opacity="0.6"/>
              <rect x="9" y="10" width="6" height="5" rx="1" fill="#B8D4E8"/>
              <rect x="17" y="10" width="6" height="5" rx="1" fill="#B8D4E8"/>
              <circle cx="10" cy="26" r="2.5" fill="#2D2A26"/>
              <circle cx="22" cy="26" r="2.5" fill="#2D2A26"/>
              <circle cx="10" cy="26" r="1" fill="#A09A94"/>
              <circle cx="22" cy="26" r="1" fill="#A09A94"/>
            </svg>
            <div class="exp-step-underline"></div>
          </div>
          <span class="exp-step-progress">4/4</span>
        </div>
        <h2 class="exp-step-title">Di chuy·ªÉn</h2>
        <p class="exp-step-question" id="transport-question"><strong>Xem b·∫°n th∆∞·ªùng ƒëi l·∫°i b·∫±ng g√¨ nh√©.</strong></p>

        <!-- Transport result text (shown after food) -->
        <p class="exp-result-text" id="transport-intro-text" style="display:none;"></p>

        <!-- Choice cards -->
        <div class="exp-choice-row" id="transport-choice-row">
          <button class="exp-choice-card" id="transport-choice-no" onclick="transportChoice(false)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="16" y="18" width="24" height="28" rx="4" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <rect x="20" y="12" width="16" height="10" rx="2" fill="#B8E8CC"/>
                <circle cx="28" cy="32" r="5" fill="#02b887"/>
                <circle cx="22" cy="22" r="2" fill="#F0C020"/>
                <circle cx="28" cy="20" r="1.5" fill="#F0C020"/>
                <circle cx="34" cy="22" r="2" fill="#F0C020"/>
              </svg>
            </div>
            <span class="exp-choice-label">Kh√¥ng,<br>m√¨nh ·ªïn</span>
          </button>
          <button class="exp-choice-card" id="transport-choice-yes" onclick="transportChoice(true)">
            <div class="exp-choice-illustration">
              <svg width="56" height="56" viewBox="0 0 56 56" fill="none">
                <rect x="12" y="22" width="32" height="18" rx="3" fill="#D8F0E2" stroke="#02b887" stroke-width="1.5"/>
                <circle cx="28" cy="31" r="5" fill="#02b887"/>
                <path d="M20 16l3 6M36 16l-3 6M28 12v8" stroke="#02b887" stroke-width="2" stroke-linecap="round"/>
                <path d="M18 18l2-4M38 18l-2-4" stroke="#E8A838" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
            <span class="exp-choice-label">C√≥, m√¨nh<br>t·ª± tr·∫£</span>
          </button>
        </div>

        <!-- Transport "No" message -->
        <div id="transport-no-msg" class="exp-message-card" style="display:none;">
          <p class="exp-message-text">Hay! ƒê·ª° lo m·ªôt kho·∫£n chi l·ªõn r·ªìi.</p>
        </div>

        <!-- Transport breakdown (if "Yes") -->
        <div id="transport-breakdown-section" style="display:none;">
          <div class="exp-subcategory-list">
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">Thu√™ xe</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-trans-rental-currency">VND</span>
                  <input type="text" id="transport-rental-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói th√°ng</span>
              </div>
            </div>
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">XƒÉng</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-trans-gas-currency">VND</span>
                  <input type="text" id="transport-gas-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói l·∫ßn</span>
                <span class="exp-times-x">&times;</span>
                <input type="text" id="transport-gas-times" class="number-input exp-times-input" placeholder="0" inputmode="numeric">
                <span class="exp-times-label">l·∫ßn/th√°ng</span>
              </div>
            </div>
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">Uber/Grab</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-trans-uber-currency">VND</span>
                  <input type="text" id="transport-uber-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói l·∫ßn</span>
                <span class="exp-times-x">&times;</span>
                <input type="text" id="transport-uber-times" class="number-input exp-times-input" placeholder="0" inputmode="numeric">
                <span class="exp-times-label">l·∫ßn/th√°ng</span>
              </div>
            </div>
            <div class="exp-subcat-row">
              <span class="exp-subcat-badge">Kh√°c</span>
              <div class="exp-subcat-inputs">
                <span class="exp-currency-input-group">
                  <span class="currency-badge" id="exp-trans-other-currency">VND</span>
                  <input type="text" id="transport-others-amount" class="number-input cost-input" placeholder="0" inputmode="numeric">
                </span>
                <span class="exp-times-label">m·ªói l·∫ßn</span>
                <span class="exp-times-x">&times;</span>
                <input type="text" id="transport-others-times" class="number-input exp-times-input" placeholder="0" inputmode="numeric">
                <span class="exp-times-label">l·∫ßn/th√°ng</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom nav -->
        <div class="exp-bottom-nav">
          <div class="exp-nav-arrows">
            <button class="exp-nav-arrow" onclick="goToFoodStep()">
Back
            </button>
            <p class="income-summary-note exp-nav-currency-note">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
            <button class="exp-nav-arrow exp-nav-disabled" id="transport-nav-forward" disabled onclick="showMilestoneSummary()">
Go
            </button>
          </div>
        </div>
      </div>

      <!-- ====== MILESTONE SUMMARY ====== -->
      <div id="expenses-milestone" style="display:none;">
        <div class="exp-milestone-card">
          <div class="exp-pie-legend" id="milestone-legend"></div>
          <canvas class="exp-big-pie" id="milestone-pie" width="280" height="280"></canvas>

          <p class="exp-milestone-summary" id="milestone-summary-text"></p>

          <div class="exp-hours-breakdown" id="milestone-hours-breakdown"></div>

          <div class="exp-other-prompt-card">
            <p class="exp-other-prompt-title">C√≤n kho·∫£n chi n√†o kh√°c c·∫ßn th√™m kh√¥ng?</p>
            <p class="exp-other-prompt-subtitle">vd: Gi·∫£i tr√≠, ƒëƒÉng k√Ω d·ªãch v·ª•, th√∫ c∆∞ng, h·ªó tr·ª£ gia ƒë√¨nh, v.v.</p>
            <div class="exp-other-prompt-buttons">
              <button class="exp-other-prompt-btn exp-other-prompt-btn-yes" onclick="goToOtherExpensesStep()">
                C√≥, m√¨nh c√≤n mu·ªën th√™m
              </button>
              <button class="exp-other-prompt-btn exp-other-prompt-btn-skip" onclick="goToResultStep()">
                ·ªîn r·ªìi, cho m√¨nh xem k·∫øt qu·∫£
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- ====== STEP: OTHER MONTHLY EXPENSES ====== -->
      <div id="expenses-step-otherExpenses" style="display:none;">
        <p class="exp-subtitle" id="other-expenses-subtitle">Kho·∫£n nh·ªè th√¥i, nh∆∞ng c·ªông l·∫°i c≈©ng kha kh√°!</p>

        <!-- Decorative progress dots -->
        <div class="exp-progress-dots">
          <span class="exp-dot"></span>
          <span class="exp-dot"></span>
          <span class="exp-dot"></span>
        </div>

        <!-- Section header -->
        <div class="exp-other-section-header">
          <h2 class="exp-other-section-title">Chi ph√≠ h√†ng th√°ng kh√°c</h2>
          <button class="exp-nav-arrow" onclick="goToResultStep()">
Go
          </button>
        </div>

        <!-- Search bar -->
        <div class="exp-other-search-wrap">
          <svg class="exp-other-search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
            <circle cx="11" cy="11" r="7" stroke="#C5C0BA" stroke-width="2"/>
            <path d="M20 20l-4-4" stroke="#C5C0BA" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <input type="text" id="other-expenses-search" class="exp-other-search-input" placeholder="T√¨m ki·∫øm" autocomplete="off">
        </div>

        <!-- Cards container (rendered by JS) -->
        <div id="other-expenses-cards"></div>

        <!-- No results message (hidden by default) -->
        <div id="other-expenses-no-results" style="display:none;">
          <p class="exp-other-no-results-text">·ªêi, kh√¥ng t√¨m th·∫•y m·ª•c b·∫°n c·∫ßn.<br>Th·ª≠ th√™m v√†o th·∫ª <strong>Kh√°c</strong> nh√©.</p>
          <div id="other-expenses-no-results-card"></div>
        </div>

        <!-- Over income alert (hidden by default) -->
        <div id="other-expenses-over-income" style="display:none;">
          <div class="exp-other-over-income-card">
            <h3 class="exp-other-over-income-title">Con s·ªë tƒÉng nhanh qu√° üëÄ</h3>
            <p class="exp-other-over-income-text">Chi ti√™u v·ª´a v∆∞·ª£t thu nh·∫≠p r·ªìi.<br>Xem l·∫°i ƒë·ªÉ c·∫Øt gi·∫£m ch√∫t nh√©.</p>
            <div class="exp-other-over-income-breakdown" id="other-expenses-breakdown"></div>
            <div class="exp-other-over-income-actions">
              <button class="exp-other-over-income-btn" onclick="dismissOtherOverIncome()">Xem l·∫°i con s·ªë</button>
            </div>
            <div class="exp-other-over-income-income">
              <span class="exp-other-over-income-income-label" id="other-over-income-amount"></span>
              <button class="exp-other-over-income-btn" onclick="adjustIncomeFromOther()">ƒêi·ªÅu ch·ªânh thu nh·∫≠p</button>
            </div>
          </div>
        </div>

        <!-- Bottom nav -->
        <div class="exp-bottom-nav">
          <div class="exp-nav-arrows">
            <button class="exp-nav-arrow" onclick="goBackFromOtherExpenses()">
Back
            </button>
            <p class="income-summary-note exp-nav-currency-note">Ti·ªÅn t·ªá theo c√†i ƒë·∫∑t h·ªì s∆° c·ªßa b·∫°n.</p>
            <button class="exp-nav-arrow" onclick="goToResultStep()">
Go
            </button>
          </div>
        </div>
      </div>

      <!-- ====== STEP: RESULT ====== -->
      <div id="expenses-step-result" style="display:none;">

        <!-- ‚îÄ‚îÄ SECTION 1: The numbers are in ‚îÄ‚îÄ -->
        <div class="res-section" id="res-section-numbers">
          <h2 class="res-title">ƒê√¢y l√† con s·ªë c·ªßa b·∫°n</h2>
          <div class="res-summary-row">
            <div class="res-summary-card res-card-earn">
              <span class="res-summary-label">Ki·∫øm ƒë∆∞·ª£c m·ªói th√°ng</span>
              <span class="res-summary-currency" id="res-earn-currency"></span>
              <span class="res-summary-value" id="res-earn-value"></span>
            </div>
            <div class="res-summary-card res-card-spend">
              <span class="res-summary-label">Chi cho cu·ªôc s·ªëng</span>
              <span class="res-summary-currency" id="res-spend-currency"></span>
              <span class="res-summary-value" id="res-spend-value"></span>
            </div>
          </div>
          <div class="res-summary-card res-card-save">
            <span class="res-summary-label">D√†nh cho t∆∞∆°ng lai</span>
            <span class="res-summary-currency" id="res-save-currency"></span>
            <span class="res-summary-value" id="res-save-value"></span>
          </div>
        </div>

        <!-- Section divider: clock -->
        <div class="res-section-divider">
          <div class="res-divider-line"></div>
          <svg class="res-divider-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="9.5" stroke="#A09A94" stroke-width="1.8"/>
            <path d="M12 7.5V12l3 2" stroke="#A09A94" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <div class="res-divider-line"></div>
        </div>

        <!-- ‚îÄ‚îÄ SECTION 2: Where your time goes ‚îÄ‚îÄ -->
        <div class="res-section" id="res-section-time">
          <h2 class="res-title" id="res-time-title"></h2>
          <p class="res-time-intro" id="res-time-intro"></p>
          <div class="res-timeline-track-wrap">
            <div class="res-timeline-track" id="res-timeline-track"></div>
            <div class="res-timeline-days" id="res-timeline-days"></div>
          </div>
          <div class="res-time-breakdown" id="res-time-breakdown"></div>
          <div class="res-share-footer">
            <button class="share-btn" onclick="shareTimeSection()">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Section divider: target -->
        <div class="res-section-divider">
          <div class="res-divider-line"></div>
          <svg class="res-divider-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="9.5" stroke="#A09A94" stroke-width="1.8"/>
            <circle cx="12" cy="12" r="5" stroke="#A09A94" stroke-width="1.8"/>
            <circle cx="12" cy="12" r="1.5" fill="#A09A94"/>
          </svg>
          <div class="res-divider-line"></div>
        </div>

        <!-- ‚îÄ‚îÄ SECTION 3: Looking ahead ‚îÄ‚îÄ -->
        <div class="res-section" id="res-section-ahead">
          <h2 class="res-title">Nh√¨n v·ªÅ ph√≠a tr∆∞·ªõc</h2>
          <div class="res-ahead-savings-card">
            <span class="res-ahead-label">V·ªõi t·ªëc ƒë·ªô n√†y, b·∫°n ƒëang ti·∫øt ki·ªám</span>
            <div class="res-ahead-value-row">
              <span class="res-ahead-value" id="res-annual-value"></span>
              <span class="res-ahead-unit">/ nƒÉm</span>
            </div>
          </div>
          <p class="res-ahead-explain">Cu·ªôc s·ªëng kh√≥ l∆∞·ªùng l·∫Øm. N·∫øu mai m·∫•t vi·ªác, hay c√≥ h√≥a ƒë∆°n y t·∫ø b·∫•t ng·ªù th√¨ sao?<br><strong>Qu·ªπ d·ª± ph√≤ng</strong> ch√≠nh l√† t·∫•m ƒë·ªám an to√†n ‚Äî ƒë·ªß ti·ªÅn trang tr·∫£i 6 th√°ng m√† kh√¥ng c·∫ßn thu nh·∫≠p.</p>
          <div class="res-ahead-bottom-row">
            <div class="res-ahead-bottom-card">
              <span class="res-ahead-bottom-label">Qu·ªπ d·ª± ph√≤ng l√Ω t∆∞·ªüng</span>
              <span class="res-ahead-bottom-currency" id="res-emergency-currency"></span>
              <span class="res-ahead-bottom-value" id="res-emergency-value"></span>
            </div>
            <div class="res-ahead-bottom-card" id="res-emergency-months-card">
              <span class="res-ahead-bottom-label" id="res-emergency-months-label"></span>
              <span class="res-ahead-bottom-value" id="res-emergency-months-value"></span>
              <span class="res-ahead-bottom-note" id="res-emergency-months-note"></span>
            </div>
          </div>

          <!-- Emergency Fund Calculator -->
          <button class="res-ahead-calc-toggle" id="ahead-calc-toggle" onclick="toggleEmergencyCalc()"></button>

          <div class="res-ahead-calc" id="ahead-calc-section" style="display:none">
            <!-- Inputs area -->
            <div class="res-ahead-calc-inputs">
              <!-- Months stepper -->
              <div class="res-ahead-calc-field">
                <span class="res-ahead-calc-field-label" id="ahead-calc-months-label"></span>
                <div class="res-ahead-calc-stepper">
                  <button class="res-ahead-calc-stepper-btn" onclick="stepEmergencyMonths(-1)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/></svg>
                  </button>
                  <div class="res-ahead-calc-stepper-display">
                    <span class="res-ahead-calc-stepper-value" id="ahead-calc-months-value">6</span>
                    <span class="res-ahead-calc-stepper-unit" id="ahead-calc-months-unit"></span>
                  </div>
                  <button class="res-ahead-calc-stepper-btn" onclick="stepEmergencyMonths(1)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/></svg>
                  </button>
                </div>
              </div>
              <!-- Savings pill input -->
              <div class="res-ahead-calc-field">
                <span class="res-ahead-calc-field-label" id="ahead-calc-savings-label"></span>
                <div class="res-ahead-calc-pill">
                  <span class="res-ahead-calc-pill-currency" id="ahead-calc-currency"></span>
                  <input type="text" inputmode="numeric" id="ahead-calc-savings" class="res-ahead-calc-pill-input">
                  <span class="res-ahead-calc-pill-suffix" id="ahead-calc-savings-suffix"></span>
                </div>
              </div>
            </div>
            <!-- Result cards -->
            <div class="res-ahead-calc-results">
              <div class="res-ahead-calc-card res-ahead-calc-card--goal">
                <span class="res-ahead-calc-card-label" id="ahead-calc-goal-label"></span>
                <span class="res-ahead-calc-card-sub" id="ahead-calc-goal-currency"></span>
                <span class="res-ahead-calc-card-value" id="ahead-calc-goal-value"></span>
              </div>
              <div class="res-ahead-calc-card res-ahead-calc-card--time">
                <span class="res-ahead-calc-card-label" id="ahead-calc-need-label"></span>
                <span class="res-ahead-calc-card-value" id="ahead-calc-need-value"></span>
                <span class="res-ahead-calc-card-note" id="ahead-calc-need-note"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Section divider: heart pulse -->
        <div class="res-section-divider">
          <div class="res-divider-line"></div>
          <svg class="res-divider-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" stroke="#A09A94" stroke-width="1.8" fill="none"/>
          </svg>
          <div class="res-divider-line"></div>
        </div>

        <!-- ‚îÄ‚îÄ SECTION 4: How healthy is your budget? ‚îÄ‚îÄ -->
        <div class="res-section" id="res-section-health">
          <h2 class="res-title">Ng√¢n s√°ch c·ªßa b·∫°n kh·ªèe kh√¥ng?</h2>

          <div class="res-health-comparison">
            <!-- Your situation -->
            <div class="res-health-col">
              <span class="res-health-col-title">B·∫†N ƒêANG ·ªû ƒê√ÇY</span>
              <div class="res-health-bar-wrap">
                <div class="res-health-bar" id="res-bar-needs-you"><span class="res-health-bar-label" id="res-label-needs-you"></span></div>
              </div>
              <div class="res-health-bar-wrap">
                <div class="res-health-bar" id="res-bar-wants-you"><span class="res-health-bar-label" id="res-label-wants-you"></span></div>
              </div>
              <div class="res-health-bar-wrap">
                <div class="res-health-bar" id="res-bar-savings-you"><span class="res-health-bar-label" id="res-label-savings-you"></span></div>
              </div>
            </div>

            <!-- Category labels -->
            <div class="res-health-labels-col">
              <span class="res-health-cat-label">c·∫ßn thi·∫øt</span>
              <span class="res-health-cat-label">mong mu·ªën</span>
              <span class="res-health-cat-label">ti·∫øt ki·ªám</span>
            </div>

            <!-- Recommended -->
            <div class="res-health-col">
              <span class="res-health-col-title">KHUY·∫æN NGH·ªä</span>
              <div class="res-health-bar-wrap">
                <div class="res-health-bar res-bar-recommended" style="width:50%"><span class="res-health-bar-label">50%</span></div>
              </div>
              <div class="res-health-bar-wrap">
                <div class="res-health-bar res-bar-recommended" style="width:30%"><span class="res-health-bar-label">30%</span></div>
              </div>
              <div class="res-health-bar-wrap">
                <div class="res-health-bar res-bar-recommended" style="width:20%"><span class="res-health-bar-label">20%</span></div>
              </div>
            </div>
          </div>

          <p class="res-health-footnote">*C·∫ßn thi·∫øt = Nh√† ·ªü + Ti·ªán √≠ch + ƒÇn u·ªëng + Di chuy·ªÉn<br>Mong mu·ªën = Kh√°c</p>

          <!-- Savings health score ‚Äî vertical stacked -->
          <div class="res-score-card">
            <div class="res-score-title">ƒêi·ªÉm s·ª©c kh·ªèe ti·∫øt ki·ªám</div>
            <div class="res-score-tiers" id="res-score-tiers">
              <div class="res-score-row" data-tier="tight">
                <span class="res-score-dot" style="background:#E85D3A"></span>
                <span class="res-score-name" style="color:#E85D3A">Eo h·∫πp</span>
                <span class="res-score-range">0%</span>
              </div>
              <div class="res-score-row" data-tier="stretched">
                <span class="res-score-dot" style="background:#D4940A"></span>
                <span class="res-score-name" style="color:#D4940A">CƒÉng th·∫≥ng</span>
                <span class="res-score-range">1 ‚Äì 9%</span>
              </div>
              <div class="res-score-row" data-tier="balance">
                <span class="res-score-dot" style="background:#A3B865"></span>
                <span class="res-score-name" style="color:#A3B865">C√¢n b·∫±ng</span>
                <span class="res-score-range">10 ‚Äì 19%</span>
              </div>
              <div class="res-score-row" data-tier="healthy">
                <span class="res-score-dot" style="background:#02b887"></span>
                <span class="res-score-name" style="color:#02b887">Kh·ªèe m·∫°nh</span>
                <span class="res-score-range">20 ‚Äì 29%</span>
              </div>
              <div class="res-score-row" data-tier="strong">
                <span class="res-score-dot" style="background:#2E8B57"></span>
                <span class="res-score-name" style="color:#2E8B57">V·ªØng v√†ng</span>
                <span class="res-score-range">30%+</span>
              </div>
            </div>
            <p class="res-score-verdict" id="res-score-verdict"></p>
          </div>
          <div class="res-share-footer">
            <button class="share-btn" onclick="shareHealthSection()">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M4 12v7a2 2 0 002 2h12a2 2 0 002-2v-7M16 6l-4-4-4 4M12 2v13" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Section divider: lightbulb -->
        <div class="res-section-divider">
          <div class="res-divider-line"></div>
          <svg class="res-divider-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M9 21h6M12 3a6 6 0 00-4 10.5V17h8v-3.5A6 6 0 0012 3z" stroke="#A09A94" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <div class="res-divider-line"></div>
        </div>

        <!-- ‚îÄ‚îÄ SECTION 5: What if... (placeholder) ‚îÄ‚îÄ -->
        <div class="res-section" id="res-section-whatif">
          <h2 class="res-title">N·∫øu nh∆∞...</h2>
          <p class="whatif-subtitle">K√©o thanh tr∆∞·ª£t ƒë·ªÉ xem thay ƒë·ªïi ·∫£nh h∆∞·ªüng th·∫ø n√†o</p>

          <!-- Category sliders -->
          <div class="whatif-categories" id="whatif-categories">
            <div class="whatif-cat" data-cat="housing">
              <div class="whatif-cat-header">
                <span class="whatif-cat-name">üè† Nh√† ·ªü</span>
                <div class="whatif-cat-values">
                  <span class="whatif-cat-current same" id="whatif-housing-current"></span>
                  <input type="text" class="whatif-cat-new" id="whatif-housing-new" inputmode="numeric" data-cat="housing">
                </div>
              </div>
              <input type="range" class="whatif-slider" id="whatif-slider-housing" min="0" max="0" step="50000" value="0">
            </div>
            <div class="whatif-cat" data-cat="utilities">
              <div class="whatif-cat-header">
                <span class="whatif-cat-name">‚ö° Ti·ªán √≠ch</span>
                <div class="whatif-cat-values">
                  <span class="whatif-cat-current same" id="whatif-utilities-current"></span>
                  <input type="text" class="whatif-cat-new" id="whatif-utilities-new" inputmode="numeric" data-cat="utilities">
                </div>
              </div>
              <input type="range" class="whatif-slider" id="whatif-slider-utilities" min="0" max="0" step="50000" value="0">
            </div>
            <div class="whatif-cat" data-cat="food">
              <div class="whatif-cat-header">
                <span class="whatif-cat-name">üçú ƒÇn u·ªëng</span>
                <div class="whatif-cat-values">
                  <span class="whatif-cat-current same" id="whatif-food-current"></span>
                  <input type="text" class="whatif-cat-new" id="whatif-food-new" inputmode="numeric" data-cat="food">
                </div>
              </div>
              <input type="range" class="whatif-slider" id="whatif-slider-food" min="0" max="0" step="50000" value="0">
            </div>
            <div class="whatif-cat" data-cat="transport">
              <div class="whatif-cat-header">
                <span class="whatif-cat-name">üöó Di chuy·ªÉn</span>
                <div class="whatif-cat-values">
                  <span class="whatif-cat-current same" id="whatif-transport-current"></span>
                  <input type="text" class="whatif-cat-new" id="whatif-transport-new" inputmode="numeric" data-cat="transport">
                </div>
              </div>
              <input type="range" class="whatif-slider" id="whatif-slider-transport" min="0" max="0" step="50000" value="0">
            </div>
            <div class="whatif-cat" data-cat="others">
              <div class="whatif-cat-header">
                <span class="whatif-cat-name">üé≠ Kh√°c</span>
                <div class="whatif-cat-values">
                  <span class="whatif-cat-current same" id="whatif-others-current"></span>
                  <input type="text" class="whatif-cat-new" id="whatif-others-new" inputmode="numeric" data-cat="others">
                </div>
              </div>
              <input type="range" class="whatif-slider" id="whatif-slider-others" min="0" max="0" step="50000" value="0">
            </div>
          </div>

          <!-- Reset -->
          <button class="whatif-reset" id="whatif-btn-reset">‚Ü∫ V·ªÅ l·∫°i hi·ªán t·∫°i</button>

          <!-- Divider -->
          <div class="whatif-divider">
            <div class="whatif-divider-line"></div>
            <span class="whatif-divider-label">B·ª©c tranh m·ªõi c·ªßa b·∫°n</span>
            <div class="whatif-divider-line"></div>
          </div>

          <!-- Impact cards -->
          <div class="whatif-impact">
            <div class="whatif-impact-card">
              <div class="whatif-impact-label">T·ªïng chi ti√™u</div>
              <div class="whatif-impact-currency" id="whatif-spend-currency"></div>
              <div class="whatif-impact-value spend" id="whatif-impact-spending"></div>
              <div class="whatif-impact-delta neutral" id="whatif-impact-spending-delta">Kh√¥ng ƒë·ªïi</div>
            </div>
            <div class="whatif-impact-row">
              <div class="whatif-impact-card">
                <div class="whatif-impact-label">ƒêi·ªÉm s·ª©c kh·ªèe</div>
                <div class="whatif-impact-value health" id="whatif-impact-health"></div>
                <div class="whatif-impact-tier" id="whatif-impact-tier"></div>
                <div class="whatif-impact-delta neutral" id="whatif-impact-health-delta">Kh√¥ng ƒë·ªïi</div>
              </div>
              <div class="whatif-impact-card">
                <div class="whatif-impact-label">Ti·∫øt ki·ªám/th√°ng</div>
                <div class="whatif-impact-currency save-currency" id="whatif-save-currency"></div>
                <div class="whatif-impact-value save" id="whatif-impact-saving"></div>
                <div class="whatif-impact-delta neutral" id="whatif-impact-saving-delta">Kh√¥ng ƒë·ªïi</div>
              </div>
            </div>
          </div>

        </div>

        <!-- ‚îÄ‚îÄ SECTION 6: Amend your figures ‚îÄ‚îÄ -->
        <div class="res-section res-amend-section" id="res-section-amend">
          <h2 class="res-title">Mu·ªën ch·ªânh l·∫°i con s·ªë?</h2>
          <p class="res-amend-subtitle">B·∫•m v√†o danh m·ª•c ƒë·ªÉ c·∫≠p nh·∫≠t. Thay ƒë·ªïi s·∫Ω t·ª± ƒë·ªông hi·ªÉn th·ªã.</p>
          <div class="res-amend-buttons" id="res-amend-buttons">
            <button class="res-amend-btn" onclick="amendExpenseCategory('housing')">
              <span class="res-amend-icon">üè†</span>
              <span class="res-amend-label">Nh√† ·ªü</span>
              <span class="res-amend-value" id="res-amend-housing"></span>
            </button>
            <button class="res-amend-btn" onclick="amendExpenseCategory('utilities')">
              <span class="res-amend-icon">‚ö°</span>
              <span class="res-amend-label">Ti·ªán √≠ch</span>
              <span class="res-amend-value" id="res-amend-utilities"></span>
            </button>
            <button class="res-amend-btn" onclick="amendExpenseCategory('food')">
              <span class="res-amend-icon">üçú</span>
              <span class="res-amend-label">ƒÇn u·ªëng</span>
              <span class="res-amend-value" id="res-amend-food"></span>
            </button>
            <button class="res-amend-btn" onclick="amendExpenseCategory('transport')">
              <span class="res-amend-icon">üöó</span>
              <span class="res-amend-label">Di chuy·ªÉn</span>
              <span class="res-amend-value" id="res-amend-transport"></span>
            </button>
            <button class="res-amend-btn" onclick="amendExpenseCategory('otherExpenses')">
              <span class="res-amend-icon">üé≠</span>
              <span class="res-amend-label">Kh√°c</span>
              <span class="res-amend-value" id="res-amend-others"></span>
            </button>
            <button class="res-amend-btn res-amend-btn-income" onclick="amendExpenseCategory('income')">
              <span class="res-amend-icon">üí∞</span>
              <span class="res-amend-label">Thu nh·∫≠p/th√°ng</span>
              <span class="res-amend-value" id="res-amend-income"></span>
            </button>
          </div>
        </div>

        <!-- Bottom nav -->
        <div class="exp-bottom-nav">
          <div class="exp-nav-arrows">
            <button class="exp-nav-arrow" onclick="expensesBack()">
Back
            </button>
            <span></span>
            <span></span>
          </div>
        </div>

        <!-- Back to top button -->
        <button class="back-to-top" id="back-to-top" onclick="scrollToTop()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 19V5M5 12l7-7 7 7" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
      </div>

      <!-- Confetti canvas -->
      <canvas id="confetti-canvas" class="exp-confetti-canvas"></canvas>
      <a class="feedback-link" href="#" onclick="openFeedback(); return false;">üí¨ G√≥p √Ω</a>
    </div>

    <!-- ============================================================
         MODALS
         ============================================================ -->
    <!-- Welcome-back modal for returning users -->
    <div id="welcome-back-modal" class="modal-overlay" style="display:none;">
      <div class="modal-card wb-modal-card">
        <button class="wb-modal-close" onclick="dismissWelcomeBackModal(); navigateBack();">&times;</button>
        <div class="wb-modal-greeting" id="wb-modal-greeting">Ch√†o m·ª´ng tr·ªü l·∫°i!</div>
        <h3 class="modal-title wb-modal-title">Mu·ªën c·∫≠p nh·∫≠t con s·ªë kh√¥ng?</h3>
        <p class="wb-modal-subtitle">B·∫•m v√†o danh m·ª•c ƒë·ªÉ ƒë·∫øn ngay, ho·∫∑c xem k·∫øt qu·∫£ lu√¥n.</p>
        <div class="wb-modal-buttons" id="wb-modal-buttons">
          <button class="res-amend-btn" onclick="wbAmendCategory('housing')">
            <span class="res-amend-icon">üè†</span>
            <span class="res-amend-label">Nh√† ·ªü</span>
            <span class="res-amend-value" id="wb-amend-housing"></span>
          </button>
          <button class="res-amend-btn" onclick="wbAmendCategory('utilities')">
            <span class="res-amend-icon">‚ö°</span>
            <span class="res-amend-label">Ti·ªán √≠ch</span>
            <span class="res-amend-value" id="wb-amend-utilities"></span>
          </button>
          <button class="res-amend-btn" onclick="wbAmendCategory('food')">
            <span class="res-amend-icon">üçú</span>
            <span class="res-amend-label">ƒÇn u·ªëng</span>
            <span class="res-amend-value" id="wb-amend-food"></span>
          </button>
          <button class="res-amend-btn" onclick="wbAmendCategory('transport')">
            <span class="res-amend-icon">üöó</span>
            <span class="res-amend-label">Di chuy·ªÉn</span>
            <span class="res-amend-value" id="wb-amend-transport"></span>
          </button>
          <button class="res-amend-btn" onclick="wbAmendCategory('otherExpenses')">
            <span class="res-amend-icon">üé≠</span>
            <span class="res-amend-label">Kh√°c</span>
            <span class="res-amend-value" id="wb-amend-others"></span>
          </button>
          <button class="res-amend-btn res-amend-btn-income" onclick="wbAmendCategory('income')">
            <span class="res-amend-icon">üí∞</span>
            <span class="res-amend-label">Thu nh·∫≠p/th√°ng</span>
            <span class="res-amend-value" id="wb-amend-income"></span>
          </button>
        </div>
        <div class="wb-modal-actions">
          <button class="wb-modal-result-btn" onclick="wbGoToResults()">Xem k·∫øt qu·∫£ c·ªßa m√¨nh ‚Üí</button>
          <button class="wb-modal-start-btn" onclick="wbStartFresh()">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
        </div>
      </div>
    </div>

    <!-- Language selection popup (first-time users) -->
    <div id="lang-popup-modal" class="modal-overlay" style="display:none;">
      <div class="modal-card lang-popup-card">
        <div class="lang-popup-icon">üåê</div>
        <h3 class="modal-title lang-popup-title">Choose your language<br>Ch·ªçn ng√¥n ng·ªØ</h3>
        <p class="lang-popup-subtitle">Which language do you prefer?<br>B·∫°n mu·ªën d√πng ng√¥n ng·ªØ n√†o?</p>
        <div class="lang-popup-options" id="lang-popup-options">
          <button class="lang-popup-option" onclick="selectLanguageFromPopup('vi')">
            <span class="lang-popup-flag">üáªüá≥</span>
            <span class="lang-popup-label">Ti·∫øng Vi·ªát</span>
          </button>
          <button class="lang-popup-option" onclick="selectLanguageFromPopup('en')">
            <span class="lang-popup-flag">üá¨üáß</span>
            <span class="lang-popup-label">English</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Over-income alert modal -->
    <div id="over-income-modal" class="modal-overlay" style="display:none;">
      <div class="modal-card">
        <div class="modal-icon">
          <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
            <circle cx="24" cy="24" r="22" fill="#FFF3D0" stroke="#E8C07A" stroke-width="2"/>
            <path d="M24 14v14" stroke="#D4940A" stroke-width="3" stroke-linecap="round"/>
            <circle cx="24" cy="34" r="2" fill="#D4940A"/>
          </svg>
        </div>
        <h3 class="modal-title">·ªêi ‚Äî kho·∫£n chi n√†y l·ªõn qu√°.</h3>
        <p class="modal-body">Hi·ªán ƒëang nhi·ªÅu h∆°n thu nh·∫≠p c·ªßa b·∫°n. Ki·ªÉm tra l·∫°i tr∆∞·ªõc khi ti·∫øp nh√©.</p>
        <div class="modal-buttons">
          <button class="modal-btn modal-btn-review" onclick="dismissOverIncomeModal()">Xem l·∫°i con s·ªë</button>
          <button class="modal-btn modal-btn-adjust" onclick="adjustIncomeFromModal()">ƒêi·ªÅu ch·ªânh thu nh·∫≠p</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="locales/vi.js"></script>
  <script src="locales/en.js"></script>
  <script src="js/currencies.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
